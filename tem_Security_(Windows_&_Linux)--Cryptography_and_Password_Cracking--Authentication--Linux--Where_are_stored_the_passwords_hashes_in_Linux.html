<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Where are stored the passwords hashes in Linux</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Where are stored the passwords hashes in Linux</h1><br /><br /><strong>
      <h3>Where Password Hashes are Stored in Linux?</h3>
    </strong><br />Before we can crack the password hashes, we first need to know where they are stored.
    Traditionally(before 1988) password hashes for accounts were stored in the<strong> /etc/passwd</strong> file.
    However, this caused security issues since the file was readable by all users on the system. Now, instead of a
    password hash, this file contains an <span style="text-decoration:underline;">&quot;x&quot;</span> to indicate that
    the password details are located(shadowed) in a different place: the <strong>/etc/shadow</strong> file. This file is
    only readable by the superuser (root), so there is far less of a security risk associated with this
    file.<br /><br /><strong>/etc/shadow</strong> → Because of /etc/passwd file is is readable by any account on system,
    it is vulnerable. Most modern Linux and UNIX machines move the password hashes to another file /etc/shadow. <span
      style="text-decoration:underline;">This file is readable only by accounts with UID 0 (superuser privileges on the
      system)</span>. Machines with /etc/shadow file still have /etc/passwd but that file doesn&#39;t store passwords
    anymore but only user account information(UID and GID numbers).<br /> <a href=""><img src="images/728-1.png"
        alt="images/728-1.png" /></a><br /> 1. <strong>Login Username</strong><br /> 2. <strong>Encrypted
      Password</strong>: Usually password format is set to $<span style="text-decoration:underline;">id</span>$<span
      style="text-decoration:underline;">salt</span>$<span style="text-decoration:underline;">hashed</span><br />
    <code>*</code> means password never established<br /> <code>!</code> or <code>!!</code> means that the account is
    locked.<br /> The <em>$id</em> is the algorithm used:<br /> ◇ if nothing is specified is <a
      href="hodology--System_Security_(Windows_&_Linux)--Cryptography_and_Password_Cracking--Authentication--Linux--Hashing_algorithms--DES_algorithm.html">DES</a>
    (e.g: Kyq4bCxAXJkbg)<br /> ◇ _ is BSDi (e.g: _EQ0.jzhSVeUyoSqLupI)<br /> ◇ $1$ is <a
      href="hodology--System_Security_(Windows_&_Linux)--Cryptography_and_Password_Cracking--Authentication--Linux--Hashing_algorithms--MD5_algorithm.html">MD5</a>
    Linux also know as md5crypt (e.g.: $1$etNnh7FA$OlM7eljE/B7F1J4XYNnk81)<br /> ◇ $2a$ is Blowfish<br /> ◇ $2$ is
    Blowfish<br /> ◇ $5$ is SHA-256<br /> ◇ $6$ is SHA-512<br /> 3. <strong>Last password change</strong>: Days since
    Jan 1, 1970 that password was last changed<br /> 4. <strong>Minimum</strong> : the number of days left before the
    user is allowed to change his/her password<br /> 5. <strong>Maximum</strong> : The maximum number of days the
    password is valid<br /> 6. <strong>Warn</strong> : The number of days before password is to expire <br /> 7.
    <strong>Inactive</strong> : The number of days after password expires that account is disabled<br /> 8.
    <strong>Expire</strong> : days since Jan 1, 1970 that account is disabled i.e. an absolute date specifying when the
    login may no longer be used<br /><br /><strong>/etc/passwd</strong> → On some older UNIX or Linux systems, the
    password representations are stored here and it is readable by any account on system<br /> <a href=""><img
        src="images/728-2.png" alt="images/728-2.png" /></a><br /> 1. <strong>Username</strong><br /> 2.
    <strong>Password</strong>: An x character indicates that encrypted password is stored in /etc/shadow file<br /> 3.
    <strong>User ID (UID): </strong>Each user must be assigned a user ID (UID).<span style="text-decoration:underline;">
      UID 0 (zero) is reserved for root</span> and UIDs 1-99 are reserved for other predefined accounts. Further UID
    100-999 are reserved by system for administrative and system accounts/groups.<strong><br /></strong> 4.
    <strong>Group ID (GID): </strong>The primary group ID (stored in /etc/group file)<strong><br /></strong> 5.
    <strong>User ID Info(Gecos field)</strong>: The comment field. It allow you to add extra information about the
    users<br /> 6. <strong>Home directory</strong>: The absolute path to the directory the user will be in when they log
    in. If this directory does not exists then users directory becomes /<br /> 7. <strong>Command/shell</strong>: The
    absolute path of a command or shell (/bin/bash). Typically, this is a shell<br /><br /><strong>
      <h3>Combines account information from /etc/passwd and /etc/shadow</h3>
    </strong><br /> An important thing to note is that <strong>/etc/shadow</strong> and <strong>/etc/passwd</strong>
    have some overlapping content. <br /> John the Ripper&#39;s tool suite provides a nifty
    tool(<strong>unshadow</strong>) to merge these two files into one.<br />
    <div class="codebox">
      <div class="codebox">unshadow&nbsp;/etc/passwd&nbsp;/etc/shadow&nbsp;&gt;&nbsp;ourMergedFile</div>
    </div><br /><br /><br />Bibliography:<br /><a
      href="http://raidersec.blogspot.com/2013/01/cracking-unix-passwords-with-john.html" target="_blank">http://raidersec.blogspot.com/2013/01/cracking-unix-passwords-with-john.html</a><br /><a
      href="https://www.cyberciti.biz/faq/understanding-etcshadow-file/" target="_blank">https://www.cyberciti.biz/faq/understanding-etcshadow-file/</a><br />
  </div>
</body>

</html>