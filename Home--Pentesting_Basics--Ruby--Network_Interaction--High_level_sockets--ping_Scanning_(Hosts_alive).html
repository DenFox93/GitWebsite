<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>ping Scanning (Hosts alive)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>ping Scanning (Hosts alive)</h1><br/><br />One of the most simple methods to check if an host is up, is by using ICMP echo request<br /><br /><div class="codebox"><div class="codebox">#&nbsp;gem&nbsp;install&nbsp;net-ping&nbsp;-r</div></div><br />    <a href=""><img src="images/1954-1.png" alt="images/1954-1.png" /></a><br /><br /><strong>Ping script</strong><br /><div class="codebox"><div class="codebox">require&nbsp;&#39;net/ping&#39;<br />host&nbsp;=&nbsp;ARGV[0]<br />req&nbsp;=&nbsp;Net::Ping::ICMP.new(host)<br />if&nbsp;req.ping&nbsp;then&nbsp;puts&nbsp;host&nbsp;+&nbsp;&quot;&nbsp;UP&quot;<br />else&nbsp;puts&nbsp;host&nbsp;+&nbsp;&quot;&nbsp;DOWN&quot;&nbsp;end</div></div><br />    <a href=""><img src="images/1954-2.png" alt="images/1954-2.png" /></a><br /><br /><strong>Ping Sweep script</strong><br />In a ping sweep in an internal network we have to perform 254 ICMP requests, one for each host in a /24 network.<br />• While running, we will print to stdout all of the IP addresses that respond with an ICMP reply.<br />• By default, net-ping sets the ICMP response timeout to 5 seconds. Therefore the time to scan a /24 network can be (in the worst case) 254*5 seconds, about 20 minutes.<br />   ◇ To set a <span style="color:#00ff00;">custom timeout</span>, you have to <span style="text-decoration:underline;">create the Net::Ping::ICMP instance</span> and provide the timeout as an argument.<br />• Note that for simplicity of the script as input we need to insert only /24 networks and <span style="color:#ff0000;text-decoration:underline;">not provide the last octet</span><br /><br /><div class="codebox"><div class="codebox">require&nbsp;&#39;net/ping&#39;<br /><br />def&nbsp;main(network,timeout)<br />	timeout&nbsp;=&nbsp;timeout&nbsp;?&nbsp;timeout&nbsp;:&nbsp;1<br />	(1..254).each&nbsp;do&nbsp;|i|&nbsp;<br />		req&nbsp;=&nbsp;Net::Ping::ICMP.new(network+i.to_s,nil,timeout.to_f)<br />		puts&nbsp;network+i.to_s&nbsp;if&nbsp;req.ping<br />	end<br />end<br />begin<br />	main(ARGV[0],ARGV[1])<br />end<br /></div></div><br />    <a href=""><img src="images/1954-3.png" alt="images/1954-3.png" /></a><br />    <br /><br /></div>
</body>
</html>
