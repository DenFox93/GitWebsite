<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Local Port Forwarding</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Local Port Forwarding</h1><br/><strong>Requirements:</strong><br />• shell of the Pivot system<br /><strong>CONS:</strong><br />• We can targets only a single port<br /><br /><strong><h3>Linux(Local Port Forwarding)</h3></strong><strong><br /></strong><strong>• Port Forwarding using the built-in firewall Iptables</strong><br />    Iptables(firewall Linux service) can be configured to forward the incoming traffic (coming from us) in the compromised Linux machine to another device<br />    <div class="codebox"><div class="codebox">echo&nbsp;&#39;1&#39;&nbsp;&gt;&nbsp;/proc/sys/net/ipv4/conf/eth0/forwarding<br />iptables&nbsp;-t&nbsp;nat&nbsp;-A&nbsp;PREROUTING&nbsp;-p&nbsp;tcp&nbsp;-i&nbsp;eth0&nbsp;--dport&nbsp;&lt;IncomingPort&gt;&nbsp;-j&nbsp;DNAT&nbsp;--to-&nbsp;destination&nbsp;&lt;DestinationIP&gt;:&lt;DestinationPort&gt;<br />iptables&nbsp;-A&nbsp;FORWARD&nbsp;-p&nbsp;tcp&nbsp;-d&nbsp;&lt;DestinationIP&gt;&nbsp;--dport&nbsp;&lt;DestinationPort&gt;&nbsp;-m&nbsp;state&nbsp;--state&nbsp;NEW,ESTABLISHED,RELATED&nbsp;-j&nbsp;ACCEPT</div></div><br /><strong>• Port Forwarding using Netcat</strong><br />    <div class="codebox"><div class="codebox">mknod&nbsp;mypipe&nbsp;p<br />nc&nbsp;-l&nbsp;-p&nbsp;[IncomingPivotPort]&nbsp;&lt;&nbsp;mypipe&nbsp;|&nbsp;nc&nbsp;[DestinationIP]&nbsp;[DestinationTargetPort]&nbsp;&gt;&nbsp;mypipe</div></div><br /><br /><strong><h3>Windows(Local Port Forwarding)</h3></strong><br />Similar to SSH local port forwarding<br /><div class="codebox"><div class="codebox">netsh&nbsp;interface&nbsp;portproxy&nbsp;add&nbsp;v4tov4&nbsp;listenport=[IncomingPivotPort]&nbsp;connectport=[DestinationTargetPort]&nbsp;connectaddress=<span style="color:#000000;font-weight:400">[</span>DestinationIP<span style="color:#000000;font-weight:400">]</span></div></div><br /><div class="codebox"><div class="codebox">netstat&nbsp;-anp&nbsp;TCP&nbsp;|&nbsp;grep&nbsp;[IncomingPivotPort]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#to&nbsp;confirm&nbsp;if&nbsp;IncomingPivotPort&nbsp;is&nbsp;listening&nbsp;on&nbsp;the&nbsp;compromised&nbsp;Windows&nbsp;host</div></div><br /><br /></div>
</body>
</html>
