<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>egress-framework</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>egress-framework</h1><br /><strong>
      <h1>egress-framework</h1>
    </strong><br />egresscheck framework is a tool that can automatically identify the ports that allow outbound
    connectivity<br /><br />we position in the folder were we want to download it and then:<br />
    <div class="codebox">
      <div class="codebox">git&nbsp;clone&nbsp;https://github.com/stufus/egresscheck-framework.git</div>
    </div><br />enter in the folder downloaded<br />
    <div class="codebox">
      <div class="codebox">cd&nbsp;egresscheck-framework/</div>
    </div><br />and we can execute this python tool<br />
    <div class="codebox">
      <div class="codebox">python&nbsp;ecf.py</div>
    </div><br /><br /><a href=""><img src="images/103-1.png" alt="images/103-1.png" /></a><br /> we give<strong>
      generate powershell-cmd</strong> in order to have a single PowerShell command that we will execute on the Windows
    machine<br /> This encrypted command contains code that will make PowerShell try to access every port in the given
    range from the 172.16.91.100 machine on your Kali machine<br /><a href=""><img src="images/103-2.png"
        alt="images/103-2.png" /></a><br /><br />• from the<strong> </strong><strong><span style="color:#ff0000;">kali
        linux machine</span></strong> go in the /tmp folder where is the .bat file<br /> to share the egress file we
    create, like before, start a python web server in the /tmp folder of the kali linux machine <br />
    <div class="codebox">
      <div class="codebox">python&nbsp;-m&nbsp;SimpleHTTPServer&nbsp;8080</div>
    </div><br />• access from the <strong><span style="color:#1e90ff;">Windows machine</span></strong> at the file →
    open the web browser and go to the address of the web server 172.16.91.10:8080 and download the .bat file<br />• now
    come back to the<strong> </strong><strong><span style="color:#ff0000;">kali linux machine</span></strong> and start
    wireshark <br />• from the<span style="color:#1e90ff;"> </span><strong><span style="color:#1e90ff;">Windows
        machine</span></strong> now we can execute the .bat file downloaded with permissions of Administrator<br />• now
    on wireshark of the<span style="color:#ff0000;"> </span><strong><span style="color:#ff0000;">kali linux
        machine</span></strong> we put a Display filter with a range of the ports that we have scanned<br />
    (tcp.srcport &gt;= 8500 and tcp.srcport &lt;= 9000) or (tcp.dstport &gt;= 8500 and tcp.dstport &lt;= 9000) <br /> if
    any ports is displayed means that this port is also allowed outbound connectivity on the 172.16.91.100 machine’s
    firewall<br /> in the next pic we can see that on the<strong> 9000 port</strong> is allowed outbound
    connectivity<br /> <a href=""><img src="images/103-3.png" alt="images/103-3.png" /></a><br />We have found only the
    9000 port because we have set a range of 8500-9000 <br /> <br /><br /><br /><br /><br />
  </div>
</body>

</html>