<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Check if a Mail Server is an open relay</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Check if a Mail Server is an open relay</h1><br /><br /><br />An SMTP server that works as an open
    relay, is a email server that does not verify if the user is authorised to send email from the specified email
    address. Therefore, users would be able to send email originating from any third-party email address that they
    want.<br />Test: <br /> ◇ Internal Source Address → External Destination Address<br /> ◇ External Source Address →
    External Destination Address<br /> ◇ External Source Address → Internal Destination Address<br /> ◇ Internal Source
    Address → Internal Destination Address<br /><br /><br />
    <div class="codebox">
      <div class="codebox">
        dig&nbsp;-t&nbsp;mx&nbsp;&lt;domain&gt;&nbsp;@1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#mail&nbsp;servers&nbsp;of&nbsp;google.com<br />nmap&nbsp;-p25&nbsp;&nbsp;&lt;mail-server&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#check&nbsp;if&nbsp;the&nbsp;smatp&nbsp;port&nbsp;is&nbsp;open<br />nc&nbsp;&lt;mail-server&gt;&nbsp;25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#connect&nbsp;with&nbsp;netcat<br />&nbsp;&nbsp;&nbsp;&nbsp;HELO&nbsp;&lt;hostname&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;MAIL&nbsp;FROM:&nbsp;example1@domain1.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#source&nbsp;address<br />&nbsp;&nbsp;&nbsp;&nbsp;RCPT&nbsp;TO:&nbsp;example2@domain2.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#destination&nbsp;address
      </div>
    </div><br /> <a href=""><img src="images/1049-1.png" alt="images/1049-1.png" /></a><br /> <a href=""><img
        src="images/1049-2.png" alt="images/1049-2.png" /></a><br /><br />Several methods exist that can be used to
    abuse SMTP to enumerate valid usernames and addresses; namely VRFY, EXPN, and RCPT TO:<br /><a
      href="https://www.nccgroup.com/uk/about-us/newsroom-and-events/blogs/2015/june/username-enumeration-techniques-and-their-value/" target="_blank">https://www.nccgroup.com/uk/about-us/newsroom-and-events/blogs/2015/june/username-enumeration-techniques-and-their-value/</a><br /><br /><strong>Alternative:
      test using nmap script</strong><br />From my test, manually testing with netcat give more precise results<br /><a
      href="https://nmap.org/nsedoc/scripts/smtp-open-relay.html" target="_blank">https://nmap.org/nsedoc/scripts/smtp-open-relay.html</a><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  </div>
</body>

</html>