<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>How to test it</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>How to test it</h1><br/><br /><br />Copy both the Target contract and the Attacker contract in two different files using remix.ethereum.org <br /><br /><br /><br />1. Use Account 1 deploy the Target simpleReentrancy contract<br />   <a href=""><img src="images/1413-1.png" alt="images/1413-1.png" /></a><br />2. Deposit 20 Ether into the account by adjusting the Value field and selecting Ether<br />    <a href=""><img src="images/1413-2.png" alt="images/1413-2.png" /></a><br />3. Copy paste the address of the target contract and enter it into the target Interface variable in the attackers contract<br />    <a href=""><img src="images/1413-3.png" alt="images/1413-3.png" /></a><br />    Insert it in the attacker code<br />    <div class="codebox"><div class="codebox">targetInterface&nbsp;bankAddress&nbsp;=&nbsp;targetInterface(0xd9145CCE52D386f254917e481eB44e9943F39138);</div></div><br />4. Use Account 2 to Deploy the attacker’s contract simpleReentrancyAttack contract<br />    <a href=""><img src="images/1413-4.png" alt="images/1413-4.png" /></a><br />    <a href=""><img src="images/1413-5.png" alt="images/1413-5.png" /></a><br />5.  Deposit 1 ether with the Account 2 using the attackers contract deposit function<br />    <a href=""><img src="images/1413-6.png" alt="images/1413-6.png" /></a><br />6. GetTargetBalance<br />    <a href=""><img src="images/1413-7.png" alt="images/1413-7.png" /></a><br />7. Then execute the attack function with the attack button<br />    <a href=""><img src="images/1413-8.png" alt="images/1413-8.png" /></a><br />8. Why transaction in pending?<br />    Because the loop is in execution<br />    <a href=""><img src="images/1413-9.png" alt="images/1413-9.png" /></a><br />    But after some seconds...<br />    <a href=""><img src="images/1413-10.png" alt="images/1413-10.png" /></a><br />9. When attack completes execution note <br />   ◇ The target balance → 0<br />       <a href=""><img src="images/1413-11.png" alt="images/1413-11.png" /></a><br />   ◇ Account 2 balance <br />       <a href=""><img src="images/1413-12.png" alt="images/1413-12.png" /></a><br />10. retrieveStolenFunds and note your new balance in the Account 2<br />    <a href=""><img src="images/1413-13.png" alt="images/1413-13.png" /></a><br />    <a href=""><img src="images/1413-14.png" alt="images/1413-14.png" /></a><br />    WIN!</div>
</body>
</html>
