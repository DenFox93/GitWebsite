<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Fix the Vulnerability</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Fix the Vulnerability</h1><br/><br />ReEntrancy is a relatively easy vulnerability to fix, yet also a very easy mistake to make<br />• <strong>Vulnerable</strong> code pattern<br />   ◇ Checks →  Interaction →  Effects<br />    <a href=""><img src="images/1414-1.png" alt="images/1414-1.png" /></a><br />• <strong>Secure</strong> code pattern:<br />   ◇ Checks →  Effects →  Interactions <br />    <a href=""><img src="images/1414-2.png" alt="images/1414-2.png" /></a><br /><br />When we re-Deploy the code of the contract with the Secure pattern, to it will be given a new address<br /><br />With this simple change, our contracts balance is not decreased with each call to the withdraw function, only the attackers balance is reduced until the attacker runs out of funds.<br />If the attacker were to keep calling this function, the require check at the beginning of the function would fail as soon as the attacker ran out of funds. However, due to the usage of Call.Value and the lack of error handling, the funds may be incorrectly handled in the contract and error checking must be manually implemented.</div>
</body>
</html>
