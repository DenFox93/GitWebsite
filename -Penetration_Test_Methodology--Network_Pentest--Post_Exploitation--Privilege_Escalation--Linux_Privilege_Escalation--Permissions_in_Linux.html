<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Permissions in Linux</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Permissions in Linux</h1><br />Permissions in Linux are a relationship between users, groups, and
    files &amp; directories<br /><br />• <span style="color:#1e90ff;">Users</span> can belong to multiple <span
      style="color:#ff8700;">groups</span>.<br />• <span style="color:#ff8700;">Groups</span> can have multiple <span
      style="color:#1e90ff;">users</span>.<br />• <span style="color:#a020f0;">files</span> and <span
      style="color:#00ff00;">directories</span> defines their permissions in terms of:<br /> ◇ a <span
      style="color:#1e90ff;">user</span><br /> ◇ a <span style="color:#ff8700;">group</span> <br /> ◇ all
    &quot;other&quot; users (world)<br /><br /><strong><span style="color:#1e90ff;">Users</span></strong><br /> ◇ <span
      style="color:#1e90ff;">User</span> accounts are configured in the /etc/passwd file.<br /> ◇ <span
      style="color:#1e90ff;">User</span> password hashes are stored in the /etc/shadow file.<br /> ◇ <span
      style="color:#1e90ff;">Users</span> are identified by an integer user ID (UID).<br /> ▪ The “root” <span
      style="color:#1e90ff;">user account</span> is a special type of account in Linux. It has an UID of 0, and the
    system grants this user access to every file.<br /> <br /><br /><strong><span
        style="color:#ff8700;">Groups</span></strong><br /> ◇ <span style="color:#ff8700;">Groups</span> are configured
    in the /etc/group file.<br /> ◇ <span style="color:#1e90ff;">Users</span> have a <span
      style="text-decoration:underline;">primary </span><span
      style="color:#ff8700;text-decoration:underline;">group</span>, and can have multiple <span
      style="text-decoration:underline;">secondary (or supplementary) </span><span
      style="color:#ff8700;text-decoration:underline;">groups</span>.<br /> ▪ By default, a <span
      style="color:#1e90ff;">user</span>’s <span style="text-decoration:underline;">primary </span><span
      style="color:#ff8700;text-decoration:underline;">group</span> has the same name as their <span
      style="color:#1e90ff;">user account</span>.<br /><br /><a href=""><img src="images/1271-1.png"
        alt="images/1271-1.png" /></a><br /><br /><strong><span style="color:#a020f0;">Files</span></strong><strong> and
    </strong><strong><span style="color:#00ff00;">Directories</span></strong><br /> ◇ All files &amp; directories have a
    single owner and a group.<br /> ◇ Permissions are defined in terms of operations:<br /> ▪ read(r)<br /> - <span
      style="color:#a020f0;">file</span> → contents can be read<br /> - <span style="color:#00ff00;">directory</span> →
    files and subdirectories can be listed<br /> ▪ write(w)<br /> - <span style="color:#a020f0;">file</span> → contents
    can be modified<br /> - <span style="color:#00ff00;">directory</span> → files and subdirectories can be created in
    the directory<br /> ▪ execute(x)<br /> - <span style="color:#a020f0;">file</span> → can be executed (i.e. run as
    some kind of process).<br /> - <span style="color:#00ff00;">directory</span> → can be entered. Without this
    permission, neither the read nor write permissions will work.<br /> ◇ There are three sets of permissions<br /> ▪
    one for the owner<br /> - Only the owner can change permissions<br /> ▪ one for the group<br /> ▪ one for all
    “other” users (can also be referred toas “world”).<br /><br /><br /><strong>Each </strong><strong><span
        style="color:#1e90ff;">User(UID)</span></strong><strong>/</strong><strong><span
        style="color:#ff8700;">Group(GID) has 3 IDs</span></strong><strong>:</strong><br /> ◇ <span
      style="color:#0ee491;">real ID</span><br /> ▪ Id defined in /etc/passwd<br /> ▪ Ironically is actually less often
    to check the user&#39;s identity<br /> ◇ <span style="color:#ff0000;">effective ID</span> → <br /> ▪ normally equal
    to their real ID<br /> ▪ set to another user’s real ID when when executing a process as that user<br /> ▪ used in
    most access control decisions to verify a user (example: whoami use the effective ID)<br /> ◇ <span
      style="color:#00dbff;">saved ID</span><br /> ▪ used to ensure that SUID processes can temporarily switch a user’s
    effective ID back to their real ID and back again without losing track of the original effective
    ID<br /><br />Current process: <span style="color:#1e90ff;">UID</span> and <span
      style="color:#ff8700;">GID</span>:<br />
    <div class="codebox">
      <div class="codebox">target@debian:~$&nbsp;grep&nbsp;$LOGNAME&nbsp;/etc/passwd</div>
    </div><br /> <a href=""><img src="images/1271-2.png" alt="images/1271-2.png" /></a><br />Current process: <span
      style="color:#0ee491;">real ID</span>, <span style="color:#ff0000;">effective ID</span>, <span
      style="color:#00dbff;">saved ID</span>, file system ID<br />
    <div class="codebox">
      <div class="codebox">target@debian:~$&nbsp;cat&nbsp;/proc/$$/status&nbsp;|&nbsp;grep&nbsp;&quot;[UG]id&quot;</div>
    </div><br /> <a href=""><img src="images/1271-3.png"
        alt="images/1271-3.png" /></a><br /><br /><strong>Bibliography:</strong><br />• TCM Security: Linux Privilege
    Escalation for Beginners (<a
      href="https://academy.tcm-sec.com/p/linux-privilege-escalation" target="_blank">https://academy.tcm-sec.com/p/linux-privilege-escalation</a>)<br />•
    Tib3rius: Linux Privilege Escalation for OSCP &amp; Beyond! (<a
      href="https://www.udemy.com/course/linux-privilege-escalation/" target="_blank">https://www.udemy.com/course/linux-privilege-escalation/</a>)<br />
  </div>
</body>

</html>