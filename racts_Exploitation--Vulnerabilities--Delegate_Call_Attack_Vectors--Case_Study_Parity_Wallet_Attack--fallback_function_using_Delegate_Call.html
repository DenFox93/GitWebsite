<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>fallback function using Delegate Call</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>fallback function using Delegate Call</h1><br /><br />Within the parity wallet there was a default
    payable function also known as a fallback function which used a delegate call into the wallet library.<br />Fallback
    functions are called when a call is made to a contract and no function is specified while sending value to a
    contract.<br />Using this functionality an attacker was <span style="text-decoration:underline;">able to access the
      fallback function and leverage the delegate call by calling the contract and NOT specifying a function but
      specifying msg.data with the target and values shown in the above exploit</span>.<br /> <br />Fallback functions
    are often used as a catchall within contracts. We can think to them as the “default” from a switch statement or the
    “else” clause in a block of logic. You will see fallback functions aid us in many attacks for example tx.origin and
    <a
      href="Home--Blockchain_and_Smart_Contracts_Exploitation--Vulnerabilities--Re-Entrancy--Example_Attack_to_a_Vulnerable_code.html">reentrancy
      attacks</a>. <br /><br /><strong>Parity Wallet Code</strong><br />Exploitable Code from the parity wallet from the
    contract link:<br /> <a
      href="https://etherscan.io/address/0x863df6bfa4469f3ead0be8f9f2aae51c91a907b4#code" target="_blank">https://etherscan.io/address/0x863df6bfa4469f3ead0be8f9f2aae51c91a907b4#code</a><br />
    <a href=""><img src="images/1433-1.png" alt="images/1433-1.png" /></a><br />on line 435, the code logic states that
    if there is data within the transaction greater than 0 a delegate call is made which calls the wallet library in the
    context of the calling contract.<br /><br /><br /><br />Bibliography:<br />• <a
      href="https://blog.trailofbits.com/2018/09/05/contract-upgrade-anti-patterns/" target="_blank">https://blog.trailofbits.com/2018/09/05/contract-upgrade-anti-patterns/</a><br />•
    <a
      href="http://console-cowboys.blogspot.com/2020/10/smart-contract-hacking-chapter-7.html" target="_blank">http://console-cowboys.blogspot.com/2020/10/smart-contract-hacking-chapter-7.html</a>
  </div>
</body>

</html>