<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>DNS Lookup</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>DNS Lookup</h1><br /><br />With the Whois lookup we have retrieved a list of DNS servers
    associated with the target, now we want to query those servers to gain an inventory of potential target machines
    associated with the given target domain(s).<br />
    <div class="codebox">
      <div class="codebox">whois&nbsp;google.com</div>
    </div><br /> <a href=""><img src="images/1473-1.png" alt="images/1473-1.png" /></a><br /><br /><br /><br />To
    examine(query) a DNS servers and potentially obtain records about the various hosts of which it is aware we can
    use:<br />• nslookup (from command line for Windows)<br />• nslookup (from shell, it has some limitations on linux,
    because of that is better dig)<br />• dig (from shell for linux)<br />• <a
      href="http://network-tools.com/nslook/" target="_blank">http://network-tools.com/nslook/</a><br />• <a
      href="https://www.dnsqueries.com/en/" target="_blank">https://www.dnsqueries.com/en/</a><br />• <a
      href="https://mxtoolbox.com/SuperTool.aspx" target="_blank">https://mxtoolbox.com/SuperTool.aspx</a><br /><br /><br /><span
      style="color:#a020f0;">• (Forward) </span>
    <h3>DNS Lookup</h3><br />DNS zone as common practice has:<br /> ◇ more A (name -&gt; IP) records point usually to
    the same IP<br /> ◇ each PTR (IP -&gt; name) record usually points only to one name. <br />Query that asks to the
    DNS to resolve a hostname to the corresponding IP.<br /><a
      href="rk_Pentest--Recoinnaissance_(OSINT_Open_Source_Information_Gathering)--Document_Metadata_Analysis--Google_Dork_find_files_and_directories.html">A</a><a
      href="rk_Pentest--Recoinnaissance_(OSINT_Open_Source_Information_Gathering)--Document_Metadata_Analysis--Google_Dork_find_files_and_directories.html">
      record</a> maps the domain name to an IP address<br />
    <div class="codebox">
      <div class="codebox">
        nslookup&nbsp;-type=A&nbsp;www.elsfoo.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#windows<br />nslookup&nbsp;-query=A&nbsp;www.elsfoo.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux<br />dig&nbsp;-t&nbsp;A&nbsp;www.elsfoo.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux<br />host&nbsp;www.elsfoo.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux
      </div>
    </div><br /> <span style="color:#f6ff00;">◇ </span><strong><span style="color:#f6ff00;">Reverse DNS
        Lookup</span></strong><br /> <a
      href="rk_Pentest--Recoinnaissance_(OSINT_Open_Source_Information_Gathering)--Document_Metadata_Analysis--Google_Dork_find_files_and_directories.html">PTR</a><a
      href="rk_Pentest--Recoinnaissance_(OSINT_Open_Source_Information_Gathering)--Document_Metadata_Analysis--Google_Dork_find_files_and_directories.html">
      record</a> is the reverse version of an A record. the PTR record maps the IP address to a hostname. <br />
    <div class="codebox">
      <div class="codebox">
        PS&gt;&nbsp;iex&nbsp;(New-Object&nbsp;Net.WebClient).DownloadString(&quot;https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/Invoke-ReverseDnsLookup.ps1&quot;);&nbsp;Invoke-ReverseDnsLookup&nbsp;-CIDR&nbsp;192.178.124.83/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Windows
      </div>
    </div><br /> <a href=""><img src="images/1473-2.png" alt="images/1473-2.png" /></a><br />
    <div class="codebox">
      <div class="codebox">
        nslookup&nbsp;198.178.124.83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#windows<br />nslookup&nbsp;-query=PTR&nbsp;198.178.124.83&nbsp;&nbsp;&nbsp;&nbsp;#linux<br />dig&nbsp;-t&nbsp;PTR&nbsp;-x&nbsp;198.178.124.83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux<br />host&nbsp;198.178.124.83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux
      </div>
    </div><br /><a href=""><img src="images/1473-3.png" alt="images/1473-3.png" /></a><br />
    <h3>• </h3><strong>
      <h3>Name Server(NS) Lookup</h3>
    </strong><br />Here we want to know the Name Server(s)<br />
    <div class="codebox">
      <div class="codebox">dig&nbsp;-t&nbsp;NS&nbsp;elsfoo.com&nbsp;</div>
    </div><br /> <a href=""><img src="images/1473-4.png" alt="images/1473-4.png" /></a><br /> now we want to get the IP
    address of each of these NS Server(we have to do a DNS Lookup)<br />
    <div class="codebox">
      <div class="codebox">dig&nbsp;-t&nbsp;A&nbsp;ns3.elsfoo.com<br />dig&nbsp;-t&nbsp;A&nbsp;ns2.elsfoo.com</div>
    </div><br /><br /><br /><span style="color:#ff1b00;">• </span><strong>
      <h3>MX(Mail Exchange) Lookup</h3>
    </strong><br />list of servers responsible for delivering e-mails for that domain<br />
    <div class="codebox">
      <div class="codebox">
        nslookup&nbsp;-type=MX&nbsp;example.com&nbsp;&nbsp;&lt;IP_address_DNS_server&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#windows<br />nslookup&nbsp;-query=MX&nbsp;example.com&nbsp;&nbsp;&lt;IP_address_DNS_server&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux<br />dig&nbsp;-t&nbsp;MX&nbsp;example.com&nbsp;@&lt;IP_address_DNS_server&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#linux
      </div>
    </div><br />@ns3.elsfoo.com → set the server that we want to query (anyway this parameter is optional)<br /> now we
    want to get the IP address of each of these MX Server(we have to do a DNS Lookup)<br />
    <div class="codebox">
      <div class="codebox">
        dig&nbsp;-t&nbsp;A&nbsp;alt2.aspmx.l.google.com<br />dig&nbsp;-t&nbsp;A&nbsp;aspmx2.googlemail.com</div>
    </div><br /><br /><br /><br />Bibliography:<br />• <a
      href="https://www.cloudflare.com/learning/dns/glossary/dns-root-server/" target="_blank">https://www.cloudflare.com/learning/dns/glossary/dns-root-server/</a><br />•
    <a
      href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank">https://www.cloudflare.com/learning/dns/dns-server-types/</a><br />•
    <a
      href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank">https://www.cloudflare.com/learning/dns/dns-server-types/</a><br /><br /><br /><br />
  </div>
</body>

</html>