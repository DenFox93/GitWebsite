<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>BeEF integration with Metasploit</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>BeEF integration with Metasploit</h1><br /><a
      href="Home--Penetration_Test_Methodology--WebApp_Pentest--Exploitation--Client-Side--Cross_Site_Scripting(XSS)--Browser_Exploitation_(BeEF).html">Browser
      Exploitation Framework (BeEF)</a><br /><br />Through the integration of BeEF with Metasploit, we could increase
    privileges and a means to persist the browser being closed, or even the system being rebooted.<br /><br />Configure
    BeEF to point at our Metasploit RPC listener, and then the BeEF interface exposes Metasploit modules:<br /> <a
      href="https://github.com/beefproject/beef/wiki/Configuration#metasploit" target="_blank">https://github.com/beefproject/beef/wiki/Configuration#metasploit</a><br /><br /><br />1.
    Enable the Metasploit module in BeEF&#39;s config (<a
      href="https://github.com/beefproject/beef/blob/master/config.yaml" target="_blank">https://github.com/beefproject/beef/blob/master/config.yaml</a>)<br />
    Open <code>/usr/share/beef-xss/config.yaml</code> (on Kali Linux) and change metasploit under the
    &quot;extension&quot; category from false to true on about line 155/156 (in my updated version of Kali).<br /> <a
      href=""><img src="images/1628-1.png" alt="images/1628-1.png" /></a><br />2. Enable the Metasploit module in
    BeEF&#39;s config (<a
      href="https://github.com/beefproject/beef/blob/master/extensions/metasploit/config.yaml" target="_blank">https://github.com/beefproject/beef/blob/master/extensions/metasploit/config.yaml</a>)<br />
    There&#39;s another configuration file in <code>/usr/share/beef-xss/extensions/metasploit/config.yaml</code> (on
    Kali Linux).<br /> ◇ Set the &quot;enable&quot; value to true<br /> ◇ Optional but more secure: change the value of
    “pass”<br /> <a href=""><img src="images/1628-2.png" alt="images/1628-2.png" /></a><br /><br />3. Enable RPC
    communication, lauch this command on Metasploit<br />
    <div class="codebox">
      <div class="codebox">
        msf&gt;&nbsp;load&nbsp;msgrpc&nbsp;ServerHost=127.0.0.1&nbsp;User=msf&nbsp;Pass=abc123&nbsp;SSL=y</div>
    </div><br /> <a href=""><img src="images/1628-3.png" alt="images/1628-3.png" /></a><br /><br />4. Run BeEF<br /> You
    must run it as root, otherwise it will give an error about loading the modules<br />
    <div class="codebox">
      <div class="codebox">
        root@kali:/#&nbsp;beef-xss&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#on&nbsp;Kali&nbsp;Linux,&nbsp;otherwise&nbsp;./beef
      </div>
    </div><br /> If it is already running it will not load the Metasploit modules!<br /> <a href=""><img
        src="images/1628-4.png" alt="images/1628-4.png" /></a><br />5. Open the panel of beef on the attacker Browser
    http://127.0.0.1:3000/ui/panel<br />6. Let a victim hook with our Hook URL(http://[maliciousWebServer]:3000/hook.js)
    like we have done <a
      href="tration_Test_Methodology--WebApp_Pentest--Exploitation--Client-Side--Cross_Site_Scripting(XSS)--Browser_Exploitation_(BeEF)--Example_Hook.html">here</a><br />7.
    Now we should have the Metasploit modules loaded in BeEF<br /> <a href=""><img src="images/1628-5.png"
        alt="images/1628-5.png" /></a><br />
  </div>
</body>

</html>