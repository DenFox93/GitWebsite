<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>DCShadow</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>DCShadow</h1><br />During <a href="http://www.bluehatil.com/" target="_blank">BlueHatIL</a> 2018 Benjamin Delpy
    and Vincent Le Toux introduced their new AD attack strategy called &quot;DCShadow&quot;.<br />DCShadow can appear
    similar to DCSync but is more intrusive and definitely different<br /><br /> ◇ BlackHat slides: <a
      href="https://www.dcshadow.com/us-18-Delpy-LeToux-So-I-Became-A-Domain-Controller.pdf" target="_blank">https://www.dcshadow.com/us-18-Delpy-LeToux-So-I-Became-A-Domain-Controller.pdf</a><br />
    ◇ DCShadow site: <a href="https://www.dcshadow.com">https://www.dcshadow.com</a><br /><br /><strong>Microsoft
      released a fix for it?</strong><br />DCShadow only relies on features that were there by design! It does not abuse
    any exploit or vulnerability (similar to DCSync)<br />Because of that it will not be patched by a Microsoft update.
    Trying to counter it would need to change the way AD works, and hence break the system. The authors of the research
    previously published the “<a href="https://adsecurity.org/?p=1729" target="_blank">DCSync</a>” attack and Microsoft did not issue
    any patch, as it only uses legitimate APIs. “Fixing” it would mean forbidding DC replication. If it ain’t broke,
    don’t fix it. AD is not broken.<br /><br /><strong>DCShadow</strong><br />DCShadow attack aims to register new fake
    Domain Controllers to inject malicious AD objects and so create backdoors or any kind of illegitimate access or
    right. To reach this goal, “DCShadow” attack must modify the targeted AD infrastructure database to authorize the
    rogue “fake” server to be part of the replication process.<br />DCShadow attack is not a privileges escalation
    vulnerability, but a misappropriation of Active Directory mechanism. It doesn’t allow red teamers to gain privileges
    but give them another solution to become persistent or to make illegitimate actions in a directory
    infrastructure.<br /><a
      href="file://C:/CherryTree/screenshots2/PTP-elearnsecurity/2. Network Security/6. Post Exploitation/DCShadow.png"><img
        src="images/1222-1.png" alt="images/1222-1.png" /></a><br /><br /><br /><strong>Detection</strong><br />DCShadow
    can be detected by reviewing the Windows event log for the temporary addition of a DC(creation and immediate
    deletion). <br />Look for:<br /> ◇ 5137 → A directory service object was created<br /> ◇ 5141 → A directory service
    object was deleted<br /><br /><br />Bibliography:<br />• <a
      href="https://www.dcshadow.com/us-18-Delpy-LeToux-So-I-Became-A-Domain-Controller.pdf" target="_blank">https://www.dcshadow.com/us-18-Delpy-LeToux-So-I-Became-A-Domain-Controller.pdf</a><br />•
    <a href="https://www.dcshadow.com" target="_blank">https://www.dcshadow.com</a><br />• <a
      href="https://blog.alsid.eu/dcshadow-explained-4510f52fc19d" target="_blank">https://blog.alsid.eu/dcshadow-explained-4510f52fc19d</a><br />•
    <a
      href="https://www.ired.team/offensive-security-experiments/active-directory-kerberos-abuse/t1207-creating-rogue-domain-controllers-with-dcshadow" target="_blank">https://www.ired.team/offensive-security-experiments/active-directory-kerberos-abuse/t1207-creating-rogue-domain-controllers-with-dcshadow</a>
  </div>
</body>

</html>