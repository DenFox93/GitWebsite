<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>meterpreter</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>meterpreter</h1><br/><br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;sysinfo</div></div><br />    <a href=""><img src="images/911-1.png" alt="images/911-1.png" /></a><br />very similar to the command<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;run&nbsp;post/linux/gather/enum_system</div></div><br /><br /><br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;getuid</div></div><br /><br />    <a href=""><img src="images/911-2.png" alt="images/911-2.png" /></a><br />    <a href=""><img src="images/911-3.png" alt="images/911-3.png" /></a><br />    UID=0 → root user <br />    UID=1-100 → first 100 UIDs for system use<br />    UID=500-1500 → new users are assigned UIDs starting from 500 or 1000<br />        In Ubuntu a new user start from 1000, next user after the first will be 1001<br /><br /><strong><h3>Privilege escalation(Linux): search on Metasploit</h3></strong><br />There are only few modules available to exploit locally Linux systems, to see them we can use:<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;background<br />msf&gt;&nbsp;search&nbsp;type:exploit&nbsp;platform:linux&nbsp;|&nbsp;grep&nbsp;local</div></div><br /><br /><strong><h3>Privilege escalation(Linux): search on Google</h3></strong><br />Because there are only a few modules we have to search the exploits manually.<br />The best way to do this is search the target OS on Google followed by &quot;privilege escalation&quot;<br /><a href=""><img src="images/911-4.png" alt="images/911-4.png" /></a><br /><a href=""><img src="images/911-5.png" alt="images/911-5.png" /></a><br /><a href=""><img src="images/911-6.png" alt="images/911-6.png" /></a><br />we have to compile the exploit found:<br /><div class="codebox"><div class="codebox">gcc&nbsp;&lt;exploit-name&gt;.c&nbsp;-o&nbsp;<span style="color:#000000;font-weight:400">&lt;</span>compiled-exploit<span style="color:#000000;font-weight:400">&gt;</span></div></div><br />and upload it with meterpreter:<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;upload&nbsp;&lt;compiled-exploit&gt;&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;#the&nbsp;dot(.)&nbsp;mean&nbsp;that&nbsp;the&nbsp;file&nbsp;will&nbsp;be&nbsp;uploaded&nbsp;in<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#the&nbsp;actual&nbsp;folder&nbsp;of&nbsp;the&nbsp;target&nbsp;machine</div></div><br /><a href=""><img src="images/911-7.png" alt="images/911-7.png" /></a><br />now we have to make executable the file:<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;execute&nbsp;-f&nbsp;/bin/sh&nbsp;-i&nbsp;-c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#execute&nbsp;the&nbsp;shell<br />chmod&nbsp;+x&nbsp;&lt;compiled-exploit&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#make&nbsp;executable&nbsp;the&nbsp;exploit</div></div><br />and execute the exploit:<br /><div class="codebox"><div class="codebox">./<span style="color:#000000;font-weight:400">&lt;</span>compiled-exploit<span style="color:#000000;font-weight:400">&gt;</span></div></div><br />to see if the exploit worked:<br /><div class="codebox"><div class="codebox">whoami&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#from&nbsp;the&nbsp;shell<br />CTRL-C&nbsp;to&nbsp;come&nbsp;back&nbsp;to&nbsp;meterpreter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#if&nbsp;we&nbsp;come&nbsp;back&nbsp;to&nbsp;meterpreter&nbsp;in&nbsp;some&nbsp;cases&nbsp;we&nbsp;lose<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#the&nbsp;privileges</div></div><br /><a href=""><img src="images/911-8.png" alt="images/911-8.png" /></a><br /></div>
</body>
</html>
