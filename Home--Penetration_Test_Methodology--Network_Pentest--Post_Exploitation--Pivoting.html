<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Pivoting</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Pivoting</h1><br /><strong>
      <h2>Pivoting</h2>
    </strong><br />A penetration test does not end once a system is compromised. We have to use the compromised system
    to access other systems in the target&#39;s network.<br />Most common ways of pivoting<br /><br /><br /><strong>
      <h3>There are two main methods encompassed in this area of pentesting:</h3>
    </strong><br />• <strong>Tunnelling/Proxying: </strong>Creating a proxy type connection through a compromised
    machine in order to route all desired traffic into the targeted network. This could potentially also
    be <em>tunnelled</em> inside another protocol (e.g. SSH tunnelling), which can be useful for evading a
    basic <strong>I</strong>ntrusion <strong>D</strong>etection <strong>S</strong>ystem (IDS) or firewall<br /> ◇ A
    proxy is good if we want to redirect lots of different kinds of traffic into our target network -- for example, with
    an nmap scan, or to access multiple ports on multiple different machines.<br />• <strong>Port
      Forwarding:</strong> Creating a connection between a local port and a single port on a target, via a compromised
    host<br /> ◇ Port Forwarding tends to be faster and more reliable, but only allows us to access a single port (or a
    small range) on a target device.<br /><br /><strong>
      <h3>Useful Tools</h3>
    </strong><br />• Proxychains / FoxyProxy<br />• SSH port forwarding and tunnelling (primarily Unix)<br />• plink.exe
    (Windows)<br />• socat (Windows and Unix)<br />• chisel (Windows and Unix)<br />• sshuttle (currently Unix
    only)<br /><br /><br /><br /><br /><strong>Cleaning Up</strong><br />It’s always important to clean up once you’re
    finished. From within Metasploit, we can stop the Socks4 proxy by running the following command to kill all
    jobs.<br />
    <div class="codebox">
      <div class="codebox">jobs&nbsp;-K</div>
    </div><br />Then you can flush the routing table entry you configured.<br />
    <div class="codebox">
      <div class="codebox">route&nbsp;flush</div>
    </div><br /><br /><br /><br /><br />Bibliography:<br />• <a
      href="https://unix.stackexchange.com/questions/115897/whats-ssh-port-forwarding-and-whats-the-difference-between-ssh-local-and-remot" target="_blank">https://unix.stackexchange.com/questions/115897/whats-ssh-port-forwarding-and-whats-the-difference-between-ssh-local-and-remot</a><br />•
    <a href="https://zaiste.net/posts/ssh-port-forwarding/" target="_blank">https://zaiste.net/posts/ssh-port-forwarding/</a><br />• <a
      href="https://pen-testing.sans.org/resources/papers/gwapt/tunneling-pivoting-web-application-penetration-testing-120229" target="_blank">https://pen-testing.sans.org/resources/papers/gwapt/tunneling-pivoting-web-application-penetration-testing-120229</a><br /><br /><br />
  </div>
</body>

</html>