<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Delegate Call Attack Vectors</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Delegate Call Attack Vectors</h1><br/><br /><strong><h3>How delegate calls work</h3></strong><br />Often while writing smart contracts we will want to call functions within other contracts.<br />    We can can do this by leveraging libraries with <span style="text-decoration:underline;">Delegate Calls</span><br /> <br />How interact with external contracts:<br />   ◇ use the ABI of a contract with Web3 calls<br />   ◇ creation of interfaces to a <span style="color:#a020f0;">target contract</span> when creating our malicious <span style="color:#ff0000;">attacking contract</span> <br />   ◇ <span style="text-decoration:underline;">use low level Delegate Calls to external contracts</span> (we will see them now)<br /><br /><br />We can define two types of contracts:<br />   ◇ <strong><span style="color:#ff8700;">Calling contract</span></strong>: The calling contract we are interacting with through our DApp<br />   ◇ <strong><span style="color:#00ff00;">Logic Contract</span></strong>: The library contract holding some kind of business logic we call with delegate call or call<br /><br /><br />We often see delegate calls used when we don’t have an ABI interface and as an upgradability pattern within solidity.<br /><br /><strong><h3>Delegate Call vs “regular” Call</h3></strong><strong> (see the </strong><a href="ockchain_and_Smart_Contracts_Exploitation--Vulnerabilities--Delegate_Call_Attack_Vectors--Delegate_Call_vs_“regular”_Call_(example_1).html">example 1 to know more about it</a><strong>)</strong><br />• <strong>Delegate Calls</strong> are used to call the functions of the <span style="color:#00ff00;">Logic Contract</span> but have the <span style="text-decoration:underline;">changes reflected in the context of the </span><span style="color:#ff8700;text-decoration:underline;">Calling Contract</span>. <br />   ◇ It essentially behaves as if you imported the functionality of the <span style="color:#00ff00;">Logic Contract</span> into the <span style="color:#ff8700;">Calling Contract</span> and the changes are reflected in the context of the <span style="color:#ff8700;">Calling Contract</span><br />   ◇ This behaves much like importing libraries when you are coding large projects and using that functionality as if it were part of your project<br />• <strong>“regular” Calls</strong> acts more like a remote API where we are making changes on the remote <span style="color:#00ff00;">Logic Contract</span> rather than our <span style="color:#ff8700;">Calling Contract</span>. <br />    When using a “regular” call, we are calling the <span style="color:#00ff00;">Logic Contract</span> but the <span style="text-decoration:underline;">effects of that are retained within the </span><span style="color:#00ff00;text-decoration:underline;">Logic Contract</span>, rather than in the context of the <span style="color:#ff8700;">Calling Contract</span>.  <br /><br /><br /><strong><h3>Variables</h3></strong><strong> (see the </strong><a href="ome--Blockchain_and_Smart_Contracts_Exploitation--Vulnerabilities--Delegate_Call_Attack_Vectors--Variables_in_a_Delegate_Call_(example_2).html">example 2 to know know more about it</a><strong>)</strong><br />• When <strong>delegate calls</strong> change the value of a variable using <span style="color:#00ff00;">Logic contract</span> it will change also the value of the variable within our <span style="color:#ff8700;">calling contract</span> <br />• In <strong>Delegate Calls</strong> the <span style="text-decoration:underline;">name</span> of the variable that we want to change must be the same in the <span style="color:#ff8700;">Calling Contract</span> and the <span style="color:#00ff00;">Logic Contract</span> otherwise can be quite dangerous and lead to disastrous results<br />• We should always have the same variables in each contract and have them in the correct order when using delegate call(first define the <span style="color:#00ff00;">Logic Contract</span> and then the <span style="color:#ff8700;">Calling Contract</span>) otherwise can be quite dangerous and lead to disastrous results. <br /></div>
</body>
</html>
