<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title> IDOR: InDirect Object Reference</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'> IDOR: InDirect Object Reference</h1><br /><br />In this chapter we will understand and attack
    Authentication &amp; Authorization On The Ethereum Blockchain using <span
      style="text-decoration:underline;">Indirect Object Reference (IDOR) vulnerabilities</span> that can allow to
    bypass UI unprotected functionality <br /><br /><br /><strong>
      <h3>Smart Contract Authorization and Visibility</h3>
    </strong><br />Smart contracts role is the same as an API that use a frontend as interface to its functionality.
    <br />You can code DApps for various platforms and access needed functionality within smart contracts for value
    transfers with functional logic. <br /><br /><strong>Visibility of a function</strong><br />A <span
      style="color:#ff0000;text-decoration:underline;">common issue</span><span style="text-decoration:underline;"> in
      the older versions of solidity(before </span><a
      href="https://docs.soliditylang.org/en/latest/050-breaking-changes.html" target="_blank">v0.5.0</a><span
      style="text-decoration:underline;">) was that smart contract functions had public visibility by default</span>,
    meaning that they were accessible by anyone knew how to interact with them. If you didn’t explicitly define the
    access level of the function it would automatically default to public, allowing anyone to call the function and
    perform actions using the contracts ABI. From 0.5.0 Explicit function visibility is mandatory<br />In newer versions
    of solidity, the compiler will complain and refuse to compile if you do not <span
      style="text-decoration:underline;">explicitly define the visibility of a function</span>(after <a
      href="https://docs.soliditylang.org/en/latest/050-breaking-changes.html" target="_blank">v0.5.0</a>) as one of the
    following:<br /> ◇ External → Is accessible to other contracts but cannot be accessed internally to the
    contract<br /> ◇ Public → Is accessible to other contracts and can be accessed internally<br /> ◇ Internal → Can
    only be accessed within the current contract or contracts deriving from it<br /> ◇ Private → These are only visible
    by the contract that defined them.<br /><br /><span style="color:#a5452a;">example: Private vs Public
      functions</span><br />
    <div class="codebox">
      <div class="codebox">pragma&nbsp;solidity&nbsp;^0.6.6;<br /><br />contract&nbsp;visibility&nbsp;<span
          style="color:#000000;font-weight:400">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;//a&nbsp;private&nbsp;function&nbsp;cannot&nbsp;be&nbsp;called&nbsp;directly&nbsp;from&nbsp;an&nbsp;external&nbsp;call/interface<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;add(uint&nbsp;_a,&nbsp;uint&nbsp;_b)&nbsp;private&nbsp;pure&nbsp;returns&nbsp;(uint){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;_a&nbsp;+&nbsp;_b;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;get_add_result(uint&nbsp;a,&nbsp;uint&nbsp;b)&nbsp;public&nbsp;pure&nbsp;returns&nbsp;(uint){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//but&nbsp;is&nbsp;possible&nbsp;to&nbsp;call&nbsp;private&nbsp;functions&nbsp;within&nbsp;the&nbsp;contract<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;add(a,&nbsp;b);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span
          style="color:#000000;font-weight:400">}</span></div>
    </div><br /> In the deployed contract, we can see that we have only a button to call the public function
    get_add_result and not the private add function.<br /> <a href=""><img src="images/1417-1.png"
        alt="images/1417-1.png" /></a><br /> <br /> <br /> <br />*In a smart contract we need a way to actually tell who
    has access to a public function in order to setup authorized transactions
  </div>
</body>

</html>