<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>OS interaction</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>OS interaction</h1><br /><br /><strong>Kernel.exec</strong><br />it replaces the current Ruby
    process with the command passed as argument.<br />This means that the original command is stopped. Therefore there
    is no way to interact with the new command.<br />
    <div class="codebox">
      <div class="codebox">kernel.exec&nbsp;&quot;[command]&quot;<br />exec&nbsp;&quot;[command]&quot;</div>
    </div><br /><span style="color:#a52a2a;">example:</span> The echo command replaces the pry interpreter (exec method
    is an abbreviation for Kernel.exec method)<br /> <a href=""><img src="images/1974-1.png"
        alt="images/1974-1.png" /></a><a href=""><img src="images/1974-2.png" alt="images/1974-2.png" /></a><br /><span
      style="text-decoration:underline;">When useful?</span> if we have a script needs to call an external OS command
    without interacting with it<br /><br /><strong>Kernel.system</strong><br />It does not replace the current
    process(like Kernel.exec); instead it creates a subshell and executes the command passed as argument inside
    it<br />• return:<br /> ◇ <span style="text-decoration:underline;">true</span> → If the command argument was found
    in the OS and it was executed correctly<br /> ◇ <span style="text-decoration:underline;">false</span>→
    Otherwise<br />• prints:<br /> ◇ <span style="text-decoration:underline;">stdout</span> and the <span
      style="text-decoration:underline;">stderror</span> of the command passed as argument <br />• sets:<br /> ◇ global
    variable <span style="text-decoration:underline;">$?</span> with the exit status information of the command
    execution<br />• It <span style="text-decoration:underline;">cannot handle outputs</span> (stdout and stderror) of
    any command sub-executed<br /><br />
    <div class="codebox">
      <div class="codebox">kernel.system&nbsp;&quot;[command]&quot;<br />exec&nbsp;&quot;[command]&quot;</div>
    </div><br /><span style="color:#a52a2a;">example</span><br /> <a href=""><img src="images/1974-3.png"
        alt="images/1974-3.png" /></a> <a href=""><img src="images/1974-4.png" alt="images/1974-4.png" /></a><br />
    <br /><strong>Kernel.backticks</strong><br />It creates a subshell and executes the command passed as argument
    inside it (like Kernel.system)<br />• return:<br /> ◇ standard output of the command executed in the
    sub-shell<br />• It <span style="text-decoration:underline;">can handle the output</span> of any command
    sub-executed<br />
    <div class="codebox">
      <div class="codebox">Kernel.`(&quot;[command]&quot;)<br /><span
          style="color:#000000;font-weight:400">(</span>`command`<span style="color:#000000;font-weight:400">)</span>
      </div>
    </div><br /> <a href=""><img src="images/1974-5.png" alt="images/1974-5.png" /></a> <a href=""><img
        src="images/1974-6.png" alt="images/1974-6.png" /></a> <br />When useful? when you have to handle a command
    output.<br /><br /><strong>IO.popen</strong>(<a
      href="https://ruby-doc.org/core-3.0.0/IO.html" target="_blank">https://ruby-doc.org/core-3.0.0/IO.html</a>)<br />run commands as
    subprocesses<br />• return:<br /> ◇ <span style="text-decoration:underline;">IO object</span> (we can interact with
    it to obtain the command <span style="text-decoration:underline;">stdin</span> and <span
      style="text-decoration:underline;">stdout</span>, not <span
      style="text-decoration:underline;">stderr</span>)<br />
    <div class="codebox">
      <div class="codebox">fd=IO.popen(&quot;echo&nbsp;&#39;Hola!&#39;&quot;)<br />fd.readline</div>
    </div><br /> <a href=""><img src="images/1974-7.png" alt="images/1974-7.png" /></a><br />
    <br /><strong>Open3.popen3</strong><br />To use popen3, you have to require the open3 library (require
    ‘open3’).<br />With it we can interact with all of the three sub-command stream: stdin, stdout and stderr.<br />•
    return<br /> ◇ IO object (stdin)<br /> ◇ IO object (stdout)<br /> ◇ IO object (stderr)<br />To use popen3, you have
    to require the open3 library (require ‘open3’).<br /> <a href=""><img src="images/1974-8.png"
        alt="images/1974-8.png" /></a><br /> Note: with gets, we read from stdout each line at time.
  </div>
</body>

</html>