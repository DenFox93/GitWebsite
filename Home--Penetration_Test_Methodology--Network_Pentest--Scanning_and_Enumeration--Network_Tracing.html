<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Network Tracing</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Network Tracing</h1><br />In this phase we have to determine the network topology and draw a
    network map<br /><br /><br /><br /><strong>Route</strong><br />Useful to find the default gateway for a host, <br />
    <div class="codebox">
      <div class="codebox">route&nbsp;-n</div>
    </div><br /> <a href=""><img src="images/643-1.png" alt="images/643-1.png" /></a><br />
    <br /><strong>Traceroute</strong><br />Useful to understand which path takes the packets to arrive to a
    host<br />Does not work if the default gateway is blocking ICMP packets (like below)<br />
    <div class="codebox">
      <div class="codebox">traceroute&nbsp;10.10.10.10&nbsp;-m&nbsp;5</div>
    </div><br /> <a href=""><img src="images/643-2.png" alt="images/643-2.png" /></a><br /><br /><br /><br /><strong>
      <h3>Zenmap</h3>
    </strong><br /><a
      href="https://nmap.org/book/zenmap-topology.html" target="_blank">https://nmap.org/book/zenmap-topology.html</a><br />Installation:
    <br />
    <div class="codebox">
      <div class="codebox">apt&nbsp;install&nbsp;zenmap&nbsp;-y</div>
    </div><br />To run the scan we can select the profile <strong>Regular Scan</strong><br />Now we can go to the tab
    <strong>Topology</strong> and we should see the topology graph.<br />The topology view is most useful when combined
    with Nmap&#39;s --traceroute option, because that&#39;s the option that discovers the network path to a
    host<br /><br />Command Line:<br />
    <div class="codebox">
      <div class="codebox">nmap&nbsp;-O&nbsp;-A&nbsp;192.168.1.0/24&nbsp;--traceroute</div>
    </div><br />It take a lot time, <span style="text-decoration:underline;">another option faster than reaceroute all
      the network is to traceroute only the Ip Addresses that we know that are alive</span><br />
    <div class="codebox">
      <div class="codebox">nmap&nbsp;[ipAddress1]&nbsp;[ipAddress2]&nbsp;--traceroute</div>
    </div><br /> <a href=""><img src="images/643-3.png" alt="images/643-3.png" /></a><br /><br /><strong>
      <h3>EtherApe</h3>
    </strong><br />
    <div class="codebox">
      <div class="codebox">apt&nbsp;install&nbsp;etherape</div>
    </div><br />run <br />
    <div class="codebox">
      <div class="codebox">etherape</div>
    </div><br /><br /><br />For other commands see the chapter <a
      href="Home--Penetration_Test_Methodology--Network_Pentest--Post_Exploitation--Mapping_the_Internal_Network.html">Post
      Exploitation: mapping the internal network</a>
  </div>
</body>

</html>