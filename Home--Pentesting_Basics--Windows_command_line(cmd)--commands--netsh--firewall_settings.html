<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>firewall settings</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>firewall settings</h1><br/>Before make changes to the rules of the Firewall make sure that it is allowed in the Rules of Engagement<br /><br /><strong>turn off firewall</strong><br />disable the firewall of the remote pc<br /><div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;firewall&nbsp;set&nbsp;opmode&nbsp;mode=disable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Windows&nbsp;XP<br />C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;set&nbsp;allprofiles&nbsp;state&nbsp;off&nbsp;&nbsp;#from&nbsp;Windows&nbsp;Vista</div></div><br /><br /><strong>view current profile status</strong><br />status of the main settings of the Firewall and what its current profile<br /><div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;show&nbsp;currentprofile</div></div><br />    <a href=""><img src="images/1088-1.png" alt="images/1088-1.png" /></a><br /><br /><strong>programs&#39;s connectivity allowed by the firewall</strong><br /><div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;firewall&nbsp;show&nbsp;allowedprogram</div></div><br /><br /><strong>view inbound and outbound rules of the firewall</strong><br /><div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;firewall&nbsp;show&nbsp;rule&nbsp;name=all</div></div><br />    <a href=""><img src="images/1088-2.png" alt="images/1088-2.png" /></a><br /><br /><strong>Add rule in Firewall</strong><br />• <span style="text-decoration:underline;">allow port</span>: if we want to allow port 4444.:<br />    <div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;firewall&nbsp;add&nbsp;rule&nbsp;name=&quot;Allow&nbsp;Port&nbsp;4444&nbsp;inbound&quot;&nbsp;protocol=TCP&nbsp;dir=in&nbsp;remoteport=4444&nbsp;action=allow&nbsp;&nbsp;#inbound<br />C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;firewall&nbsp;add&nbsp;rule&nbsp;name=&quot;Allow&nbsp;Port&nbsp;4444&nbsp;outbound&quot;&nbsp;protocol=TCP&nbsp;dir=out&nbsp;remoteport=4444&nbsp;action=allow&nbsp;&nbsp;#outbound</div></div><br />• <span style="text-decoration:underline;">allow an IP Address</span>:<br />    <div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;firewall&nbsp;add&nbsp;rule&nbsp;name=&quot;IP&nbsp;Allow&nbsp;inbound&quot;&nbsp;dir=in&nbsp;interface=any&nbsp;action=allow&nbsp;remoteip=192.168.1.122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#inbound<br />C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;firewall&nbsp;add&nbsp;rule&nbsp;name=&quot;IP&nbsp;Allow&nbsp;outbound&quot;&nbsp;dir=out&nbsp;interface=any&nbsp;action=allow&nbsp;remoteip=192.168.1.122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#inbound</div></div><br /><br /><strong>Delete rule in Firewall</strong><br />After a penetration test remember to clean up the changes done<br />    <div class="codebox"><div class="codebox">C:\&gt;&nbsp;netsh&nbsp;advfirewall&nbsp;firewall&nbsp;del&nbsp;rule&nbsp;name=&quot;IP&nbsp;Allow&nbsp;inbound&quot;</div></div><br />    </div>
</body>
</html>
