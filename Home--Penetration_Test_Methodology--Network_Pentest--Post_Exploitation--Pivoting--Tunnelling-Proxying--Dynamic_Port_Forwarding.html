<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Dynamic Port Forwarding</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>Dynamic Port Forwarding</h1><br /><a href=""><img src="images/776-1.png"
        alt="images/776-1.png" /></a><br />Dynamic Port Forwarding unlike Local/Remote Port Forwarding allows a
    communication not on a single port, but across a range of ports. <br /><br /><br /><br /><strong>
      <h3>Tools that we ca use to Access to the Tunnel Created</h3>
    </strong><br /><strong>
      <h3>• Proxychains</h3>
    </strong><br /> 1) configure proxychains <br /> Proxychains is a tool that forces any TCP connection made by any
    given application, to follow through proxy like SOCKS4, SOCKS5, TOR and so on...<br /> We have to configure
    proxychains to match the host(SRVHOST) the port(SRVPORT) that we choose for our proxy server when we have used the
    modul<br /> ◇ socks4<br />
    <div class="codebox">
      <div class="codebox">
        root@kali:/#&nbsp;echo&nbsp;&quot;socks5&nbsp;127.0.0.1&nbsp;1080&quot;&nbsp;&gt;&nbsp;/etc/proxychains.conf
      </div>
    </div><br /> <a href=""><img src="images/776-2.png" alt="images/776-2.png" /></a><br /> ◇ socks5<br /> <a
      href=""><img src="images/776-3.png" alt="images/776-3.png" /></a><br /> 2) Run commands through proxychains<br />
    Before the command we have to add <span style="text-decoration:underline;">proxychains</span> so the command will be
    forced to run through it.<br /> <span style="color:#a5452a;">examples:</span><br />
    <div class="codebox">
      <div class="codebox">
        root@kali:/#&nbsp;<br />root@kali:/#&nbsp;proxychains&nbsp;-q&nbsp;nmap&nbsp;-sT&nbsp;-Pn&nbsp;-T5&nbsp;-n&nbsp;--top-ports&nbsp;100&nbsp;10.100.40.107&nbsp;&nbsp;#use&nbsp;-sT&nbsp;in&nbsp;proxychains,&nbsp;-sS&nbsp;could&nbsp;not&nbsp;work<br />root@kali:/#&nbsp;proxychains&nbsp;-q&nbsp;nmap&nbsp;-sTV&nbsp;-Pn&nbsp;-T5&nbsp;-n&nbsp;--top-ports&nbsp;100&nbsp;10.100.40.107&nbsp;&nbsp;&nbsp;#-sTV&nbsp;==&nbsp;-sT&nbsp;+&nbsp;-sV&nbsp;<br />root@kali:/#&nbsp;proxychains&nbsp;ssh&nbsp;192.168.1.23<br />root@kali:/#&nbsp;proxychains&nbsp;telnet&nbsp;192.168.1.23<br />root@kali:/#&nbsp;proxychains&nbsp;iceweasel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#access&nbsp;to&nbsp;internal&nbsp;website&nbsp;like&nbsp;if&nbsp;we&nbsp;are&nbsp;on&nbsp;victim&nbsp;machine<br />root@kali:/#&nbsp;proxychains&nbsp;-q&nbsp;hydra&nbsp;-C&nbsp;telnet.txt&nbsp;telnet://10.32.121.23&nbsp;-V&nbsp;|&amp;&nbsp;tee&nbsp;&nbsp;&nbsp;&nbsp;#with&nbsp;-V&nbsp;(verbose)&nbsp;could&nbsp;be&nbsp;too&nbsp;much&nbsp;verbose<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#mostly&nbsp;if&nbsp;we&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;combinations&nbsp;of&nbsp;user/password
      </div>
    </div><br /> proxychains could give us a lot of debug information...<br /> <a href=""><img src="images/776-4.png"
        alt="images/776-4.png" /></a><br /> to avoid that we could use the quiet mode (-q)<br />
    <div class="codebox">
      <div class="codebox">
        proxychains&nbsp;-q&nbsp;nmap&nbsp;-sT&nbsp;-Pn&nbsp;-n&nbsp;192.168.1.23&nbsp;--top-ports&nbsp;100</div>
    </div><br /> <br /> <strong>ATTENTION</strong>: with proxychains <span style="text-decoration:underline;">use
      always</span> the options “-sT -Pn” (also with scripts)<br /> <br /> ◇ if we see more requests in loop with nmap,
    is because we have used -sV that need to take more informations!<br /> <a href=""><img src="images/776-5.png"
        alt="images/776-5.png" /></a><br /> <a href=""><img src="images/776-6.png" alt="images/776-6.png" /></a><br />
    <br /> <br /><strong>
      <h3>• FoxyProxy</h3>
    </strong><br /> While <h3>Proxychains is a good option when working with CLI tools, but if working in a web browser
      to access a webapp through a proxy, there is </h3>FoxyProxy<br /> <a href=""><img src="images/776-7.png"
        alt="images/776-7.png" /></a><br /> <a href=""><img src="images/776-8.png" alt="images/776-8.png" /></a><br />
    <a href=""><img src="images/776-9.png" alt="images/776-9.png" /></a><br /> <a href=""><img src="images/776-10.png"
        alt="images/776-10.png" /></a><br /><br /><br /><br /><br /><br /><br />Bibliography:<br />• <a
      href="https://unix.stackexchange.com/questions/115897/whats-ssh-port-forwarding-and-whats-the-difference-between-ssh-local-and-remot" target="_blank">https://unix.stackexchange.com/questions/115897/whats-ssh-port-forwarding-and-whats-the-difference-between-ssh-local-and-remot</a><br />•
    <a href="https://zaiste.net/posts/ssh-port-forwarding/" target="_blank">https://zaiste.net/posts/ssh-port-forwarding/</a><br />• <a
      href="https://pen-testing.sans.org/resources/papers/gwapt/tunneling-pivoting-web-application-penetration-testing-120229" target="_blank">https://pen-testing.sans.org/resources/papers/gwapt/tunneling-pivoting-web-application-penetration-testing-120229</a><br />
  </div>
</body>

</html>