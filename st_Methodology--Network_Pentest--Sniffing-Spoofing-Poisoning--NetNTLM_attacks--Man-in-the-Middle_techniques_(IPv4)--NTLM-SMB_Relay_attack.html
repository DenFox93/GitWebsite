<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>NTLM/SMB Relay attack</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>NTLM/SMB Relay attack</h1><br />NTLM relaying is an attack when we relay attempted NTLMv2
    authentication against our machine to another system(<a
      href="ration_Test_Methodology--Network_Pentest--Sniffing-Spoofing-Poisoning--NetNTLM_attacks--extract_NetNTLMv2_hashes_from_pcap_file_and_crack.html">instead
      of extract from pcap file and crack it</a>) in order to obtain unauthorized access to this machine.<br /><br />The
    NTLM Relay attack borrows the name from the tool released back in 2001 by Sir Dystic, called SMBRelay.<br />NTLM
    Relays are the network version of Pass the Hash attacks<br /><br />The scope of this attack is enter in the <span
      style="color:#1e90ff;">Target</span> server using the credentials of <span style="color:#ff8700;">another
      machine</span> in the network.<br />This attack WORKS ONLY if the <span style="color:#ff8700;">user</span>, who is
    trying to authenticate on the <span style="color:#ff0000;">attacker machine</span>, has administrative privileges on
    the <span style="color:#1e90ff;">Target</span><br /><strong><span style="color:#a5452a;">How it
        works:</span></strong> <br />• The <span style="color:#ff0000;">attacker (A)</span> selects the <span
      style="color:#1e90ff;">target (T)</span> server and waits until <span style="color:#ff8700;">someone(S)</span> in
    the network tries to authenticate to his(attacker) machine<br /> ◇ To do that we can also use Responder, <a
      href="e_Sign-On(SSO)_implementation_of_Windows_in_order_to_capture_NTLM_hashes--LLMNR_&_NetBIOS_NS_Spoofing-Poisoning_(mispelled_share_queries).html">as
      seen here</a> waiting for misspelled NetBIOS or LLMNR queries on the local network<br />• When a <span
      style="color:#ff8700;">machine</span> tries to authenticate on the <span style="color:#ff0000;">attacker</span>,
    it sends the authentication attempt to the selected <span style="color:#1e90ff;">target</span><br />• The <span
      style="color:#1e90ff;">target</span> creates the challenge and sends it back to the <span
      style="color:#ff0000;">attacker</span><br />• The<span style="color:#ff0000;"> attacker</span> sends the challenge
    to the <span style="color:#ff8700;">machine</span> that initiated the connection<br />• The <span
      style="color:#ff8700;">machine</span> encrypts the challenge with the password hash and sends it back to the <span
      style="color:#ff0000;">attacker</span><br />• The <span style="color:#ff0000;">attacker</span> sends the encrypted
    challenge to the <span style="color:#1e90ff;">target</span> and authenticates itself<br /><br /><br /><a
      href=""><img src="images/813-1.png" alt="images/813-1.png" /></a><br /><br /><strong>When this attack is
      useful?</strong><br />If the hash obtained in the chapters<br /> ◇ <a
      href="Sign-On(SSO)_implementation_of_Windows_in_order_to_capture_NTLM_hashes--Capture_the_Hahes_redirect_to_Attacker's_SMB_share_using_UNC_path.html">redirect
      to Attacker&#39;s SMB share using UNC path to steal NTLM credential</a><br /> ◇ <a
      href="e_Sign-On(SSO)_implementation_of_Windows_in_order_to_capture_NTLM_hashes--LLMNR_&_NetBIOS_NS_Spoofing-Poisoning_(mispelled_share_queries).html">LLMNR
      &amp; NetBIOS NS Spoofing/Poisoning for capture NTLM hashes (misspelled share queries)</a><br />are to hard to
    crack, we can relaying them by using NTLM Relay Attack<br /><br /><br /><br />Bibliography:<br />• <a
      href="https://en.hackndo.com/ntlm-relay/" target="_blank">https://en.hackndo.com/ntlm-relay/</a><br />
  </div>
</body>

</html>